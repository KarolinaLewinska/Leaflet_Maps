<html>
	<head>
		<style type="text/css">
			#map { height: 600px; }
		</style>
 		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css">
 		<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
	</head>
	<body>
		<div id="map"></div>
		<script type="text/javascript">
		
			const Map = L.map('map').setView([54.445184, 18.554771],2);
			L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
				maxZoom: 18,
				attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' 
					+'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' 
					+'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
				id: 'mapbox.streets'
			}).addTo(Map);

			var popup = L.popup();

			function onMapClick(e) {
				popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(Map);
			}
			Map.on('click', onMapClick);

			var req = new XMLHttpRequest();                                        
            		req.open('GET','https://jsonplaceholder.typicode.com/users');
            		req.onload = function() {
                		var data = JSON.parse(req.responseText);
                		for(let i = 0; i < data.length; i++) {
                    			var user = data[i]
                    			console.log(user)
                    			const markerText = `${user.name} ${user.address.street}, ${user.address.zipcode} ${user.address.city}`
                    			const markerLocation = [user.address.geo.lat, user.address.geo.lng]
                    			L.marker(markerLocation).addTo(Map)
                    			.bindPopup(markerText).openPopup(); 
				}
            		}
            		req.send()
		</script>	
	</body>
</html>
